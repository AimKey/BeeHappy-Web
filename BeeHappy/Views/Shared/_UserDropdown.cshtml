@* User Dropdown Component *@
@if (User.Identity?.IsAuthenticated == true)
{
    <div class="relative" id="beetv-user-dropdown-container">
        <!-- User Button -->
        <button id="beetv-user-button"
                class="flex items-center space-x-3 bg-dark-surface hover:bg-dark-hover border border-dark-border rounded-lg px-3 py-2 transition-all focus:outline-none focus:ring-2 focus:ring-primary/50"
                aria-expanded="false"
                aria-haspopup="true">
            <div class="w-8 h-8 rounded-full bg-gradient-to-br from-primary to-secondary flex items-center justify-center">
                <span class="text-sm font-bold">
                    @(User.Identity.Name?.Substring(0, 1).ToUpper() ?? "U")
                </span>
            </div>
            <span class="text-white font-medium hidden sm:block">@User.Identity.Name</span>
            <i class="fas fa-chevron-down w-4 h-4 text-gray-400 transition-transform duration-200" id="beetv-dropdown-arrow"></i>
        </button>

        <!-- Dropdown Menu -->
        <div id="beetv-user-dropdown-menu"
             class="absolute right-0 mt-2 w-64 bg-dark-surface border border-dark-border rounded-lg shadow-2xl opacity-0 invisible transform translate-y-2 transition-all duration-200 z-50"
             role="menu"
             aria-orientation="vertical">

            <!-- User Info Header -->
            <div class="p-4 border-b border-dark-border">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 rounded-full bg-gradient-to-br from-primary to-secondary flex items-center justify-center">
                        <span class="text-lg font-bold">
                            @(User.Identity.Name?.Substring(0, 1).ToUpper() ?? "U")
                        </span>
                    </div>
                    <div>
                        <div class="text-white font-semibold">@User.Identity.Name</div>
                        <div class="text-gray-400 text-sm">Đang hoạt động</div>
                    </div>
                </div>
            </div>

            <!-- Menu Items -->
            <div class="py-2">
                <!-- Manage user profile -->
                <a asp-action="Index" asp-controller="User" class="flex items-center space-x-3 px-4 py-3 text-gray-300 hover:text-white hover:bg-dark-hover transition-colors" role="menuitem">
                    <i class="fas fa-user w-5 h-5"></i>
                    <span>Thông tin cá nhân</span>
                </a>

                <!-- Cosmetics -->
                <a asp-action="Index" asp-controller="Cosmetics" class="flex items-center space-x-3 px-4 py-3 text-gray-300 hover:text-white hover:bg-dark-hover transition-colors" role="menuitem">
                    <i class="fas fa-palette w-5 h-5"></i>
                    <span>Trang trí</span>
                </a>

                <!-- Theme -->
                <div class="relative group">
                    <button class="flex items-center justify-between w-full px-4 py-3 text-gray-300 hover:text-white hover:bg-dark-hover transition-colors" role="menuitem">
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-moon w-5 h-5"></i>
                            <span>Chủ đề web</span>
                        </div>
                        <i class="fas fa-chevron-right w-4 h-4"></i>
                    </button>
                </div>

                <!-- Settings -->
                <a href="#" class="flex items-center space-x-3 px-4 py-3 text-gray-300 hover:text-white hover:bg-dark-hover transition-colors" role="menuitem">
                    <i class="fas fa-cog w-5 h-5"></i>
                    <span>Cài đặt</span>
                </a>
            </div>

            <!-- Divider and Additional Options -->
            <div class="border-t border-dark-border py-2">
                <!-- Terms of Service -->
                <a href="#" class="flex items-center space-x-3 px-4 py-3 text-gray-300 hover:text-white hover:bg-dark-hover transition-colors" role="menuitem">
                    <i class="fas fa-file-contract w-5 h-5"></i>
                    <span>Điều khoản và dịch vụ</span>
                </a>

                <!-- Sign Out -->
                <a asp-controller="Logout" asp-action="Logout"
                   class="flex items-center space-x-3 w-full px-4 py-3 text-red-400 hover:text-red-300 hover:bg-dark-hover transition-colors"
                   role="menuitem">
                    <i class="fas fa-sign-out-alt w-5 h-5"></i>
                    <span>Đăng xuất</span>
                </a>
            </div>
        </div>
    </div>
}
else
{
    <!-- Sign In Button for non-authenticated users -->
    <button id="signInBtn"
            class="bg-white text-dark-bg px-4 py-2 rounded-lg font-semibold hover:bg-gray-100 transition-all shadow-md hover:shadow-lg">
        Đăng nhập
    </button>
}
